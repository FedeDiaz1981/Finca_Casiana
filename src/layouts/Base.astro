---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { defaultLocale, locales, type Locale } from '../i18n/config';
import "../styles/global.css";

const guessed = (Astro.params?.lang ?? Astro.url.pathname.split('/')[1]) as Locale;
const locale: Locale = (locales as readonly string[]).includes(guessed) ? guessed : defaultLocale;

const { title } = Astro.props as { title?: string };
---
<html lang={locale} class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title ?? "Finca Casiana"}</title>
    
  </head>
 <body class="bg-[#ECE3D1] text-[#2F2F2F] antialiased">
    <!-- ⬇️ pasamos SIEMPRE el idioma -->
    <Header lang={locale} />
    <slot />
    <Footer
      lang={locale}
      instagramHandle="@fincacasiana"
      phoneHref="https://wa.me/549264XXXXXXX"
    />
  </body>
</html>
