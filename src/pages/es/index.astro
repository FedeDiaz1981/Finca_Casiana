---
import Base from "../../layouts/Base.astro";
import { getDict, type Locale } from "../../i18n/config";
import LanguageSwitcher from "../../components/LanguageSwitcher.astro";
import { GALLERY_DATA } from "../../lib/gallery-data";

const { lang } = Astro.params as { lang: Locale };
const t = getDict(lang);

import HeroCarousel from "../../components/HeroCarousel.astro";

import MapaTuristico from "../../components/MapaTuristico.astro";

import logo from "../../../public/Logo-03.png";

const items = Object.values(GALLERY_DATA)
  .flatMap(v => v ?? [])
  .filter(it => it.alt === "Img_Hero")
  .map(({ imagen, width, height, alt }) => ({
    src: imagen,   // <<-- clave: convertir 'imagen' -> 'src'
    alt,
    width,
    height,
  }))
  .sort((a, b) => {
    const fn = (s: string) => (s.split("/").pop() ?? "").replace(/\?.*$/, "").replace(/#.*$/, "");
    return fn(a.src).localeCompare(fn(b.src), "es", { numeric: true, sensitivity: "base" });
  });

---

<Base lang={lang} title={t.header.title}>
  <main class="container mx-auto p-6">
    <!-- <HeroCarousel youtubeUrl="https://youtu.be/l8QO0xbI9Jk" /> -->
    <HeroCarousel  images={items} locale="es" autoplay={true} intervalMs={4500}/>
    <section class="mt-12 px-4 mb-12 pb-12">
      <div class="max-w-3xl mx-auto text-center">
        <h3
          class="text-2xl font-semibold uppercase tracking-widest text-stone-500 mx-[auto] mb-4"
        >
          Bienvenido a
        </h3>

        <img class="w-[25rem] mx-[auto]" src={logo.src} alt="logo finca Casiana">

        <div
          class="mt-14 space-y-4 text-base md:text-xl leading-relaxed text-stone-600"
        >
          <p>
            Somos una finca familiar ubicada en el portal de acceso este a la
            ciudad de San Juan. Un espacio pensado para el descanso, la conexión
            con la naturaleza y la creación de momentos inolvidables.
          </p>
          <p>
            Nuestro entorno natural, la atención personalizada y las
            instalaciones equipadas hacen de Finca Casiana el lugar ideal para
            familias, parejas y grupos que buscan desconectarse del ruido y
            reconectar con lo esencial.
          </p>
          <p>
            Buscamos brindar un espacio de encuentro con la naturaleza donde
            cada visitante pueda disfrutar de una experiencia auténtica, segura
            y confortable. Nos enfocamos en el turismo slow, la hospitalidad y
            el cuidado por cada detalle.
          </p>
        </div>

        <div class="mt-10">
          <h3 class="text-4xl font-semibold text-stone-900">Visión</h3>
          <div
            class="mx-auto mt-2 h-1 w-16 rounded-full"
            style="background:#C76B4E;"
          >
          </div>
          <p class="mt-8 text-base md:text-xl leading-relaxed text-stone-600">
            Posicionarnos como un destino destacado en San Juan para quienes
            buscan tranquilidad, naturaleza y calidad en el servicio. Aspiramos
            a ser una referencia en turismo rural y eventos especiales en la
            región.
          </p>
        </div>
      </div>
      <div class="mt-[8em]">
        <MapaTuristico
          fijo={{ lat: -31.555666223254082, lng: -68.48057388609342 }}
        />
      </div>
      <div class="mt-10 grid gap-4 md:grid-cols-3 items-start md:items-center ">
          <p class="md:col-span-2 text-stone-700 text-lg md:text-end md:pr-16">
            Consultá la disponibilidad en tiempo real y reservá en simples
            pasos.
          </p>
          <a
            href="/es/reservas"
            class="inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold text-white w-80"
            style="background:#C76B4E"
          >
            Ver disponibilidad
          </a>
        </div>
    </section>
  </main>
</Base>
